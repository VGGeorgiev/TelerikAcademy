<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
</head>
<body>
    <script src="ScriptLibraries/class.js"></script>
    <script src="ScriptLibraries/underscore.js"></script>
    <script>
        var Animal = Class.create({
            init: function (name, species, legs) {
                this.name = name;
                this.species = species;
                this.legs = legs;
            },

            toString: function () {
                return this.name + " - " + this.species + " -> Legs: " + this.legs;
            }
        });

        var animals = [
            new Animal("Peter", "Dog", 4),
            new Animal("Joro", "Dog", 2),
            new Animal("Angel", "Dolphin", 0),
            new Animal("Valeri", "Dolphin", 3),
            new Animal("Minnka", "spider", 8),
            new Animal("Didka", "chicken", 2),
            new Animal("Ivan", "dog", 4)
        ];

        var groupedAnimals = _.groupBy(animals, function (animal) {
            return animal.species;
        });
        
        var sortedAnimals = _.sortBy(groupedAnimals, function (group) {
            return sumLegs(group);
        });

        function sumLegs(collection) {
            var sum = _.reduce(collection, function (memo, animal) {
                return memo + animal.legs;
            });
            return sum;
        };

        _.each(sortedAnimals, function (animal) {
            console.log(animal.toString());
        });
    </script>
</body>
</html>
